---
layout: post
title: AJAX 란?
subtitle: 
categories: AJAX
tags: [AJAX]
---
### AJAX 개요
* Asynchronous JavaScript and XML의 약자
* HTML, CSS, 자바스크립트, DOM, XML 등 기존에 사용되던 여러 기술을 함께 사용하는 새로운 "개발 기법"
* Ajax는 웹 페이지 전체를 다시 로딩하지 않고도, 웹 페이지의 일부분만을 갱신(비동기)
* 즉 Ajax를 이용하면 백그라운드 영역에서 서버와 통신하여, 그 결과를 웹 페이지의 일부분에만 표시할 수 있음


### Ajax의 한계
1. Ajax는 클라이언트가 서버에 데이터를 요청하는 클라이언트 풀링 방식을 사용하므로, 서버 푸시 방식의 실시간 서비스는 만들 수 없음
2. 바이너리 데이터 송수신 불가
3. Ajax 스크립트가 포함된 서버가 아닌 다른 서버로 Ajax 요청 보낼 수 없음
4. 클라이언트의 PC로 Ajax 요청을 보낼 수 없음  
    *- 클라이언트 풀링 : 사용자가 직접 원하는 정보를 서버에게 요청하여 얻는 방식 (반, 서버 푸시)*
    *- 서버 푸시(server push) :  사용자가 요청하지 않아도 서버가 알아서 자동으로 특정 정보를 제공 (스마트 폰에서  각종 앱이 보내는 푸시 알림이 서버 푸시 방식의 대표적)*


### Ajax 프레임워크
Ajax를 이용하여 개발을 손쉽게 할 수 있도록 미리 여러 가지 기능을 포함해 놓은 개발 환경
아래는 가장 많이 사용되는 프레임워크
 - Prototype
 - script.aculo.us
 - dojo
 - jQuery


### Ajax 구성 요소
 - 웹 페이지의 표현을 위한 HTML과 CSS
 - 데이터에 접근하거나 화면 구성을 동적으로 조작하기 위해 사용되는 DOM 모델
 - 데이터의 교환을 위한 JSON이나 XML
 - 웹 서버와의 비동기식 통신을 위한 **XMLHttpRequest** 객체
 - 위에서 언급한 모든 기술을 결합하여 사용자의 작업 흐름을 제어하는 데 사용되는 **자바스크립트**


```XML
<dog>
    <name>식빵</name>
    <family>웰시코기<family>
    <age>1</age>
    <weight>2.14</weight>
</dog>
```
```javascript
{
    "name": "식빵",
    "family": "웰시코기",
    "age": 1,
    "weight": 2.14
}
```

### JSON 문법
* 리터럴(literal) : 그 자체의 값
* 프로퍼티(property) : 이름 + 값으로 구성된 쌍
  *객체 = 프로퍼티(이름+값)쌍들의 정렬되지 않은 집합*
* 주석 사용 불가 (만약, 사용해야한다면 파싱하기전에는 삭제해야함)
* "데이터 이름 : 값" 으로 표현
* 쉼표(,)로 나열
* 객체(object) 표현은 중괄호({}) 사용
* 배열(array) 표현은 대괄호([]) 사용

```javascript
"dog": [
    {"name": "식빵", "family": "웰시코기", "age": 1, "weight": 2.14},
    {"name": "콩콩", "family": "포메라니안", "age": 3, "weight": 2.5},
    {"name": "젤리", "family": "푸들", "age": 7, "weight": 3.1}
]
```

### JSON 스키마
적법한 JSON 데이터의 형식을 기술한 문서

### 스키마 검증 과정
1. 데이터의 타입이 정확한가?
2. 필수로 받아와야하는 데이터가 포함되어 있는가?
3. 데이터가 원하는 범위 안에 있는가?

### 검증 키워드(validation keywords)

 검증 키워드       |   설명            
:------------   | :------------------------------------------       
type            | 유효한 데이터의 타입을 명시            
properties      | 유효한 데이터 이름과 값의 쌍들을 명시            
required        | 명시한 배열의 모든 요소를 프로퍼티로 가지고 있어야만 유효          
minimum         | 최솟값 이상의 숫자만 유효  
maximum         | 최댓값 이하의 숫자만 유효               
multipleOf      | 명시한 숫자의 배수만 유효    
maxLength       | 명시한 최대 길이 이하의 문자열만 유효 
minLength       | 명시한 최소 길이 이상의 문자열만 유효  
pattern         | 명시한 정규 표현식에 해당하는 문자열만 유효 


### 메타 데이터(metadata) 키워드
1. title
2. description
3. default


```javascript
{
    "title": "강아지 스키마",
    "description": "이 스키마는 강아지에 관한 데이터를 검증하기 위해 작성된 스키마임.",
    "type": "object",
    "properties": {
        "name": {"type": "string"},
        "family": {"type": "string"},
        "age": {"type": "integer"},
        "weight": {"type": "number"},
        "owner": {
            "type": "object",
            "properties": {
                "ownerName": {"type": "string"},
                "phone": {"type": "string"}
            }
        }
    }
}
```


### 스키마 결합
* allOf : 명시된 배열에 나열된 모든 JSON 스키마를 한 번에 검사    
           이때 배열에 나열된 스키마에 대한 검증을 "모두" 통과해야 함
* anyOf : 명시된 배열에 나열된 모든 JSON 스키마를 한 번에 검사  
           이때 배열에 나열된 "하나 이상"의 스키마에 대한 검증을 통과
* oneOf : 명시된 배열에 나열된 모든 JSON 스키마를 한 번에 검사  
           이때 배열에 나열된 "오직 하나"의 스키마에 대한 검증만을 통과
* not : 명시된 JSON 스키마를 만족하지 "않는" 데이터만을 검사


```javascript
{
    "allOf": [
        {"minLength": 3},
        {"maxLength": 5}
    ]
}
```


### JavaScript 와 JSON
1. JSON.stringify()
2. JSON.parse()
3. toJSON()


### PHP와 JSON
PHP는 서버 측에서 실행되는 스크립트 언어
PHP는 개발자가 동적으로 웹 페이지를 쉽고 빠르게 만들 수 있도록 도와줌
이때 서버로부터 읽어 들이는 데이터로 JSON 데이터가 많이 사용
따라서 PHP를 사용하여 JSON 데이터를 다뤄야 할 필요성이 생깁니다.
PHP는 이러한 JSON 데이터를 다루기 위해 다음과 같은 메소드를 제공하고 있습니다.
$value에는 변환할 값을 전달하며, 이 값의 타입은 resource 타입을 제외한 PHP의 모든 타입이 올 수 있습니다.
이 함수는 UTF-8로 인코딩된 값을 인수로 전달해야만 정상적으로 동작합니다.


1. json_encode() : 전달받은 값을 JSON 형식의 문자열로 변환하여 반환  
                    UTF-8로 인코딩된 값을 인수로 전달해야만 정상적으로 동작  
```php
string json_encode(mixed $value)
```
2. json_decode() : 전달받은 JSON 형식의 문자열을 PHP 변수로 변환  
                    만약 JSON 형식에 맞지 않는 문자열을 전달하면, json_decode() 함수는 null 값을 반환  
```php
mixed json_decode(string $json)
```


출처 : <https://www.tcpschool.com/json/intro>

